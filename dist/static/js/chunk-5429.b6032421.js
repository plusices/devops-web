(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5429","chunk-6ac4","chunk-0a07","chunk-274f","chunk-91de"],{"1rZW":function(t,e,n){"use strict";n.r(e);var o=n("dKh2"),a=(n("Yfch"),n("fJ7X")),i=n.n(a),r=n("Q2AE"),s=n("bkiL"),c=(n("86NN"),{props:{isAdd:{type:Boolean,required:!0},sup_this:{type:Object,default:null},title:{type:String,default:""}},data:function(){return{loading:!1,dialog:!1,inventory_list:[],groups:[],form:{playbook_id:"",playbook_name:"",playbook_desc:"",playbook_content:"",playbook_user:r.a.getters.id,group_ids:[]},options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0},rules:{playbook_name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},components:{editor:i.a},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0,"新增"==t.title?t.doAdd():"编辑"==t.title?t.doEdit():t.doExec()})},doAdd:function(){var t=this;console.log(this.form),Object(o.a)(this.form).then(function(e){t.resetForm(),t.$message({showClose:!0,type:"success",message:"添加成功!",duration:2500}),t.loading=!1,t.$parent.$parent.cancel(),t.$parent.$parent.init()}).catch(function(e){t.loading=!1,console.log(e)})},doEdit:function(){var t=this;console.log(this.form),Object(o.c)(this.form.playbook_id,this.form).then(function(e){t.resetForm(),t.$message({showClose:!0,type:"success",message:"修改成功!",duration:2500}),t.loading=!1,t.sup_this.init()}).catch(function(e){t.loading=!1,console.log(e)})},doExec:function(){console.log(this.form.group_ids),console.log(this.form.playbook_id);var t={group_ids:this.form.group_ids,playbook_id:this.form.playbook_id};Object(s.b)(t),this.resetForm()},resetForm:function(){this.dialog=!1},editorInit:function(t){n("YqIF"),n("IJmI"),n("JLn5"),n("KWgm"),n("7F6D"),n("4am0"),t.setFontSize(13),t.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,wrap:"free"})}}}),l=n("KHd+"),u=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{"append-to-body":!0,visible:t.dialog,title:t.title,width:"720px"},on:{"update:visible":function(e){t.dialog=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"small"}},["执行"==t.title?n("el-form-item",{attrs:{label:"主机组"}},[n("el-select",{ref:"select",attrs:{multiple:"",placeholder:"请选择"},model:{value:t.form.group_ids,callback:function(e){t.$set(t.form,"group_ids",e)},expression:"form.group_ids"}},t._l(t.inventory_list,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),"执行"!=t.title?n("el-form-item",{attrs:{label:"剧本名称"}},[n("el-input",{staticStyle:{width:"100%"},model:{value:t.form.playbook_name,callback:function(e){t.$set(t.form,"playbook_name",e)},expression:"form.playbook_name"}})],1):t._e(),t._v(" "),"执行"!=t.title?n("el-form-item",{attrs:{label:"剧本描述"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{rows:"5",type:"textarea"},model:{value:t.form.playbook_desc,callback:function(e){t.$set(t.form,"playbook_desc",e)},expression:"form.playbook_desc"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"剧本内容"}},[n("editor",{attrs:{lang:"yaml",theme:"github",height:"400"},on:{init:t.editorInit},model:{value:t.form.playbook_content,callback:function(e){t.$set(t.form,"playbook_content",e)},expression:"form.playbook_content"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),"执行"!=t.title?n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")]):t._e(),t._v(" "),"执行"==t.title?n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doExec}},[t._v("执行")]):t._e()],1)],1)},[],!1,null,"5569db68",null);e.default=u.exports},"3ADX":function(t,e,n){"use strict";var o=n("o0o1"),a=n.n(o),i=n("yXPU"),r=n.n(i),s=n("t3Un");function c(t,e){return Object(s.a)({url:t,method:"get",params:e})}e.a={data:function(){return{loading:!0,data:[],page:1,size:10,total:0,url:"",params:{},query:{},time:170}},methods:{init:function(){var t=r()(a.a.mark(function t(){var e=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.beforeInit();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new Promise(function(t,n){e.loading=!0,c(e.url,e.params).then(function(n){e.total=n.count,e.data=n.results,setTimeout(function(){e.loading=!1},e.time),t(n)}).catch(function(t){e.loading=!1,n(t)})}));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeInit:function(){return!0},pageChange:function(t){var e=this;console.log(t),e.page=t,e.$refs.transfer?(console.log("1"),e.cancel(),e.init()):e.$refs.r_table?(console.log("2"),e.init().then(function(){e.initSelection()})):(console.log("3"),console.log(e.page),e.init())},sizeChange:function(t){var e=this;e.page=1,e.size=t,e.$refs.transfer?(console.log("1"),e.cancel(),e.init()):e.$refs.r_table?(console.log("2"),e.init().then(function(){e.initSelection()})):(console.log("3"),e.init())}}}},"41Be":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o=n("Q2AE");function a(t){if(t&&t instanceof Array&&t.length>0){var e=t;return!!(o.a.getters&&o.a.getters.roles).some(function(t){return e.includes(t)})}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}},"86NN":function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return c});var o=n("t3Un");function a(){return Object(o.a)({url:"api/inventory/",method:"get"})}function i(t){return Object(o.a)({url:"api/inventory/"+t+"/get_inventory_hosts/",method:"get"})}function r(t){return Object(o.a)({url:"api/inventory/",method:"post",data:t})}function s(t,e){return Object(o.a)({url:"api/inventory/"+t+"/",method:"put",data:e})}function c(t,e){return Object(o.a)({url:"api/inventory/"+t+"/",method:"patch",data:e})}},"8UPv":function(t,e,n){"use strict";var o=n("aqMa");n.n(o).a},Fs1g:function(t,e,n){},NUIN:function(t,e,n){"use strict";var o=n("Fs1g");n.n(o).a},U7OH:function(t,e,n){"use strict";n.r(e);var o=n("41Be"),a=n("3ADX"),i=n("dKh2"),r=n("7Qib"),s=n("qpgI"),c=n("vCfm"),l=n("UWP7"),u=n("n8TW"),d={components:{eHeader:c.default,edit:l.default,console:u.default},mixins:[a.a],data:function(){return{row_data:null,span:24,show:!1,table_show:!0,transfer_name:["可关联","已关联"],transfer_data:[],serverIds:[],Loading:!1,sup_this:this,ans_res:[]}},created:function(){var t=this;this.$nextTick(function(){t.init()}),this.getHost()},methods:{parseTime:r.b,checkPermission:o.a,handleCurrentChange:function(t){this.row_data=t,this.row_data&&(this.serverIds=this.row_data.hosts,this.span=12,this.show=!0,this.table_show=!1)},beforeInit:function(){this.url="api/playbook/";var t=this.query.value;return this.params={page:this.page,size:this.size,ordering:"id"},t&&(this.params.search=t),!0},subDelete:function(t){var e=this;this.Loading=!0,Object(i.b)(t).then(function(n){e.Loading=!1,e.$refs[t].doClose(),e.cancel(),e.init(),e.$message({showClose:!0,type:"success",message:"删除成功!",duration:2500})}).catch(function(n){e.Loading=!1,e.$refs[t].doClose(),u.default.log(n)})},hostSave:function(t){var e=this;this.loading=!0,Object(i.e)(this.row_data.id,{hosts:this.serverIds}).then(function(t){e.$message({showClose:!0,type:"success",message:"保存成功!",duration:2500}),e.loading=!1,e.update(e.row_data.id)}).catch(function(t){e.loading=!1,u.default.log(t)})},cancel:function(){this.span=24,this.show=!1,this.table_show=!0},getHost:function(){var t=this;Object(s.c)("Linux").then(function(e){var n=t;e.forEach(function(t,e){var o={key:t.id,label:t.ip};n.transfer_data.push(o)})})},update:function(t){var e=this;Object(i.d)(t).then(function(t){for(var n=0;n<e.data.length;n++)if(t.id===e.data[n].id){e.data[n]=t;break}})},filterMethod:function(t,e){return e.label.indexOf(t)>-1}}},p=(n("NUIN"),n("KHd+")),f=Object(p.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("eHeader",{attrs:{query:t.query}}),t._v(" "),n("el-row",{attrs:{gutter:28}},[n("el-col",{attrs:{span:t.span}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tables",staticStyle:{width:"100%"},attrs:{data:t.data,"highlight-current-row":"",size:"small",border:""}},[n("el-table-column",{attrs:{label:"序号",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"playbook_name",label:"剧本名称"}}),t._v(" "),t.table_show?n("el-table-column",{attrs:{prop:"playbook_desc",label:"剧本描述"}}):t._e(),t._v(" "),t.table_show?n("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{directives:[{name:"show",rawName:"v-show",value:e.row.playbook_time,expression:"scope.row.playbook_time"}],staticClass:"el-icon-time"}),t._v(" "),n("span",[t._v(t._s(t.parseTime(e.row.playbook_time)))])]}}],null,!1,192092916)}):t._e(),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.checkPermission(["admin","playbook_all","playbook_edit"])?n("edit",{attrs:{data:e.row,sup_this:t.sup_this}}):t._e(),t._v(" "),t.checkPermission(["admin","playbook_all","playbook_edit"])?n("el-popover",{ref:e.row.id,attrs:{placement:"top",width:"180"}},[n("p",[t._v("确定删除本条数据吗？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.Loading,type:"primary",size:"mini"},on:{click:function(n){return t.subDelete(e.row.id)}}},[t._v("确定")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1):t._e()]}}])})],1),t._v(" "),n("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:t.total,layout:"total, prev, pager, next, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),n("div",{staticStyle:{height:"10px"}}),t._v(" "),n("el-col",{attrs:{span:24}},[n("console",{attrs:{show:!0}})],1)],1)],1)},[],!1,null,null,null);e.default=f.exports},UWP7:function(t,e,n){"use strict";n.r(e);var o=n("1rZW"),a=n("Q2AE"),i=n("86NN"),r={components:{eForm:o.default},props:{data:{type:Object,required:!0},sup_this:{type:Object,required:!0}},data:function(){return{title:""}},methods:{to:function(t){var e=this.$refs.form;this.title=t,"执行"==t&&(e.inventory_list=[],Array.isArray(e.inventory_list)&&0==e.inventory_list.length&&Object(i.d)().then(function(t){t.results.forEach(function(t,n){var o={value:t.id,label:t.ans_group_name};e.inventory_list.push(o)})})),e.form={playbook_id:this.data.id,playbook_name:this.data.playbook_name,playbook_desc:this.data.playbook_desc,playbook_time:this.data.playbook_time,playbook_content:this.data.playbook_content,playbook_user:a.a.getters.id,group_ids:[]},e.dialog=!0},toEdit:function(){this.to("编辑")},toExec:function(){this.to("执行")}}},s=(n("k4lW"),n("KHd+")),c=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.toEdit}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.toExec}},[t._v("执行")]),t._v(" "),n("eForm",{ref:"form",attrs:{sup_this:t.sup_this,"is-add":!1,title:t.title}})],1)},[],!1,null,"01d0469a",null);e.default=c.exports},Yfch:function(t,e,n){"use strict";function o(t){return/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)}function a(t){return/^[a-zA-Z0-9_]+$/g.test(t)}n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a})},YqIF:function(t,e){ace.define("ace/theme/github",["require","exports","module","ace/lib/dom"],function(t,e,n){e.isDark=!1,e.cssClass="ace-github",e.cssText='.ace-github .ace_gutter {background: #e8e8e8;color: #AAA;}.ace-github  {background: #fff;color: #000;}.ace-github .ace_keyword {font-weight: bold;}.ace-github .ace_string {color: #D14;}.ace-github .ace_variable.ace_class {color: teal;}.ace-github .ace_constant.ace_numeric {color: #099;}.ace-github .ace_constant.ace_buildin {color: #0086B3;}.ace-github .ace_support.ace_function {color: #0086B3;}.ace-github .ace_comment {color: #998;font-style: italic;}.ace-github .ace_variable.ace_language  {color: #0086B3;}.ace-github .ace_paren {font-weight: bold;}.ace-github .ace_boolean {font-weight: bold;}.ace-github .ace_string.ace_regexp {color: #009926;font-weight: normal;}.ace-github .ace_variable.ace_instance {color: teal;}.ace-github .ace_constant.ace_language {font-weight: bold;}.ace-github .ace_cursor {color: black;}.ace-github.ace_focus .ace_marker-layer .ace_active-line {background: rgb(255, 255, 204);}.ace-github .ace_marker-layer .ace_active-line {background: rgb(245, 245, 245);}.ace-github .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-github.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-github.ace_nobold .ace_line > span {font-weight: normal !important;}.ace-github .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-github .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-github .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-github .ace_gutter-active-line {background-color : rgba(0, 0, 0, 0.07);}.ace-github .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-github .ace_invisible {color: #BFBFBF}.ace-github .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-github .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t("../lib/dom").importCssString(e.cssText,e.cssClass)})},aqMa:function(t,e,n){},bkiL:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var o=n("t3Un");function a(t){return Object(o.a)({url:"api/ops/ansible/",method:"post",data:t})}function i(t){return Object(o.a)({url:"api/ops/run/playbook/",method:"post",data:t})}},dKh2:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i}),n.d(e,"d",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"e",function(){return c});var o=n("t3Un");function a(t){return Object(o.a)({url:"api/playbook/",method:"post",data:t})}function i(t){return Object(o.a)({url:"api/playbook/"+t+"/",method:"delete"})}function r(t){return Object(o.a)({url:"api/playbook/"+t+"/",method:"get"})}function s(t,e){return Object(o.a)({url:"api/playbook/"+t+"/",method:"put",data:e})}function c(t,e){return Object(o.a)({url:"api/playbook/"+t+"/",method:"patch",data:e})}},k4lW:function(t,e,n){"use strict";var o=n("znnr");n.n(o).a},n8TW:function(t,e,n){"use strict";n.r(e);var o=n("oCYn"),a=(n("41Be"),n("bkiL")),i=n("Q2AE"),r=n("3ADX"),s=n("X4fA"),c=n("tAjd"),l=n.n(c),u={mixins:[r.a],data:function(){return{row_data:null,span:24,show:!1,is_permissions:!1,table_show:!0,Loading:!1,sup_this:this,ico:"unlock",unlock:!0,content:"锁定滚动条",height:document.documentElement.clientHeight-480+"px;",width:document.documentElement.clientWidth-225+"px;",startloading:!1,stoploading:!1,servers:"",server_ids:"",hosts:[],data:[],message:i.a.getters.busmsg}},watch:{msg:{handler:function(t,e){var n=this;this.$nextTick(function(){n.data.push("正在执行中......")})}},data:{handler:function(t,e){var n=this;this.$nextTick(function(){if(n.unlock){var t=document.getElementById("console");t.scrollTop=t.scrollHeight}})}}},created:function(){this.init()},mounted:function(){this.initWebSocket(),this.start()},methods:{init:function(){var t=this;window.onresize=function(){t.height=document.documentElement.clientHeight-94.5+"px;"}},prepareExec:function(t){this.data.push("任务"+t+"正在执行中......")},initWebSocket:function(){var t="ws://"+"http://undefined:8000".replace(/http:\/\//,"").replace(/https:\/\//,"")+"/websocket/console?token="+Object(s.a)();console.log(t),o.default.use(l.a,t,{connectManually:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3}),this.vm=new o.default,this.vm.$connect(),console.log("---连接Websocket----")},closeTag:function(){var t=this;this.$confirm("是否关闭页面并返回上一页?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.vm.$disconnect(),t.$router.go(-1),t.$store.dispatch("delView",t.$store.state.tagsView.visitedViews.slice(-1)[0])}).catch(function(){t.$message({type:"info",message:"取消操作"})})},start:function(){var t=this;this.$socket.onopen=function(e){1===e.target.readyState&&(console.log("--------正在读取数据!--------"),t.$socket.onmessage=function(e){t.data.push(e.data),console.log(t.data)})}},startRun:function(){var t=this;this.startloading=!0;var e={exec:"mod_run",hostIds:this.hosts,module:this.cmdForm.module,args:this.cmdForm.args};Object(a.a)(e).then(function(e){t.startloading=!1}).catch(function(e){t.startloading=!1,console.log(e)})},getColor:function(t){var e=t.match(/INFO/i),n=t.match(/WARN/i),o=t.match(/WARNING/i),a=t.match(/DEBUG/i),i=t.match(/\[(.*?)@(.*?)\]/),r=t.match(/ERROR/i),s=t.match(/(.*?[\u4e00-\u9fa5])\[(.*?\d)\]------/);return s&&(this.sequence=parseInt(s[2])),e?t.replace(/INFO/i,'<span style="color: #7FFF00;">'+e+"</span>"):o?t.replace(/WARNING/i,'<span style="color: #FFFF00;">'+o+"</span>"):n?t.replace(/WARN/i,'<span style="color: #FFFF00;">'+n+"</span>"):a?t.replace(/DEBUG/i,'<span style="color: #0000ff;">'+a+"</span>"):i?t.replace(/\[(.*?)@(.*?)\]/,'<span style="color: #FFA54F;">'+i[0]+"</span>"):r?t.replace(/ERROR/i,'<span style="color: #FF0000;">'+r+"</span>"):t},clean:function(){this.ans_result=[],this.data=[],this.$message({showClose:!0,type:"success",message:"清空控制台输出成功！",duration:3500})},resetForm:function(t){this.$refs[t].resetFields()},submitForm:function(t){},doLock:function(){this.unlock?(this.content="解除锁定",this.ico="lock"):(this.content="锁定滚动条",this.ico="unlock"),this.unlock=!this.unlock}}},d=(n("8UPv"),n("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("执行结果")])]),t._v(" "),n("div",{staticClass:"console",style:"height:"+t.height,attrs:{id:"console"}},t._l(t.data,function(e){return n("div",{key:e.id},[n("span",{staticClass:"line-html",domProps:{innerHTML:t._s(e)}})])}),0),t._v(" "),n("el-tooltip",{staticClass:"closepage item",attrs:{content:"返回上一页",effect:"dark",placement:"left"}},[n("el-button",{attrs:{type:"info",size:"mini",circle:""},on:{click:t.closeTag}},[n("svg-icon",{attrs:{"icon-class":"return"}})],1)],1),t._v(" "),n("el-tooltip",{staticClass:"clean item",attrs:{content:"清空控制台输出",effect:"dark",placement:"left"}},[n("el-button",{attrs:{type:"info",size:"mini",circle:""},on:{click:t.clean}},[n("svg-icon",{attrs:{"icon-class":"clean"}})],1)],1),t._v(" "),n("el-tooltip",{staticClass:"lock item",attrs:{content:t.content,effect:"dark",placement:"left"}},[n("el-button",{attrs:{type:"info",size:"mini",circle:""},on:{click:t.doLock}},[n("svg-icon",{attrs:{"icon-class":t.ico}})],1)],1)],1)},[],!1,null,null,null);e.default=p.exports},qpgI:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"e",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return c});var o=n("t3Un");function a(t){return t?Object(o.a)({url:"api/device/list/?os_type="+t,method:"get"}):Object(o.a)({url:"api/device/list/",method:"get"})}function i(t){return Object(o.a)({url:"api/devices/"+t+"/",method:"get"})}function r(t){return Object(o.a)({url:"api/devices/"+t+"/",method:"delete"})}function s(t,e){return Object(o.a)({url:"api/devices/"+t+"/",method:"put",data:e})}function c(t,e){return Object(o.a)({url:"api/devices/statistics/?type="+t,method:"post",data:e})}},vCfm:function(t,e,n){"use strict";n.r(e);var o=n("41Be"),a=n("7Qib"),i={components:{eForm:n("1rZW").default},props:{query:{type:Object,required:!0},title:{type:String,default:"新增"}},data:function(){return{downloadLoading:!1}},methods:{checkPermission:o.a,toQuery:function(){this.$parent.page=1,this.$parent.init()},download:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e("chunk-7d1e"),n.e("chunk-5afe")]).then(n.bind(null,"S/jZ")).then(function(e){var n=t.formatJson(["id","ans_group_name","ans_group_vars","ans_group_memo","ans_group_datetime"],t.$parent.data);e.export_json_to_excel({header:["ID","主机组名称","主机组变量","主机组描述","创建时间"],data:n,filename:"table-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"createTime"===t?Object(a.b)(e[t]):e[t]})})}}},r=n("KHd+"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入名称搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toQuery(e)}},model:{value:t.query.value,callback:function(e){t.$set(t.query,"value",e)},expression:"query.value"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:t.toQuery}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{display:"inline-block",margin:"0px 2px"}},[t.checkPermission(["admin","group_all","group_create"])?n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.$refs.form.dialog=!0}}},[t._v("新增")]):t._e(),t._v(" "),n("eForm",{ref:"form",attrs:{"is-add":!0,title:t.title}})],1)],1)},[],!1,null,null,null);e.default=s.exports},znnr:function(t,e,n){}}]);