(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-71d0"],{"/Hsh":function(e,t,a){},"5Dod":function(e,t,a){},"8A5h":function(e,t,a){"use strict";a.r(t);var s=a("41Be"),l=a("mWUm"),n=a("OWId"),r={name:"Tab",components:{Base:l.default,Passwd:n.default},data:function(){return{activeName:"1",dialog:!1,loading:!1}},methods:{checkPermission:s.a,handleClick:function(){"6"===this.activeName&&(this.$refs.form_passwd.host=this.$refs.form_base.form_base.vm_name,this.$refs.form_passwd.pinit())}}},i=(a("ST8Y"),a("KHd+")),o=Object(i.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab-container"},[a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"设备信息",name:"1"}},[a("Base",{ref:"form_base"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"硬件信息",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"软件信息",name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"变更记录",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"附加信息",name:"5"}}),e._v(" "),e.checkPermission(["admin"])?a("el-tab-pane",{attrs:{label:"密码信息",name:"6"}},[a("Passwd",{ref:"form_passwd"})],1):e._e()],1)],1)},[],!1,null,"704ea0a9",null);t.default=o.exports},I7qB:function(e,t,a){"use strict";a.d(t,"d",function(){return l}),a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"f",function(){return u});var s=a("t3Un");function l(){return Object(s.a)({url:"api/groups/",method:"get"})}function n(e){return Object(s.a)({url:"api/groups/",method:"post",data:e})}function r(e){return Object(s.a)({url:"api/groups/"+e+"/",method:"delete"})}function i(e){return Object(s.a)({url:"api/groups/"+e+"/",method:"get"})}function o(e,t){return Object(s.a)({url:"api/groups/"+e+"/",method:"put",data:t})}function u(e,t){return Object(s.a)({url:"api/groups/"+e+"/",method:"patch",data:t})}},K22w:function(e,t,a){"use strict";a.d(t,"d",function(){return l}),a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"f",function(){return u});var s=a("t3Un");function l(){return Object(s.a)({url:"api/businesses/",method:"get"})}function n(e){return Object(s.a)({url:"api/businesses/",method:"post",data:e})}function r(e){return Object(s.a)({url:"api/businesses/"+e+"/",method:"delete"})}function i(e){return Object(s.a)({url:"api/businesses/"+e+"/",method:"get"})}function o(e,t){return Object(s.a)({url:"api/businesses/"+e+"/",method:"put",data:t})}function u(e,t){return Object(s.a)({url:"api/businesses/"+e+"/",method:"patch",data:t})}},NM0R:function(e,t,a){"use strict";a.d(t,"d",function(){return l}),a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"f",function(){return u});var s=a("t3Un");function l(){return Object(s.a)({url:"api/labels/",method:"get"})}function n(e){return Object(s.a)({url:"api/labels/",method:"post",data:e})}function r(e){return Object(s.a)({url:"api/labels/"+e+"/",method:"delete"})}function i(e){return Object(s.a)({url:"api/labels/"+e+"/",method:"get"})}function o(e,t){return Object(s.a)({url:"api/labels/"+e+"/",method:"put",data:t})}function u(e,t){return Object(s.a)({url:"api/labels/"+e+"/",method:"patch",data:t})}},ST8Y:function(e,t,a){"use strict";var s=a("5Dod");a.n(s).a},mWUm:function(e,t,a){"use strict";a.r(t);var s=a("41Be"),l=a("twU4"),n=a("qpgI"),r=a("K22w"),i=a("I7qB"),o=a("NM0R"),u=a("7Qib"),c={name:"Base",data:function(){return{loading:!1,button:"edit",form_base:{id:"",add_time:"",modify_time:"",hostname:"",auth_type:"",status:"",sys_hostname:"",mac_address:"",sn_number:"",os_version:"",os_type:"",device_type:"",warranty_date:"",buy_date:"",businesses:[],groups:[],labels:[],error_message:""},group_list:[],label_list:[],business_list:[],is_Readonly:!0,types:[{value:"password",label:"密码认证"},{value:"key_filename",label:"密钥认证"}],os_types:[{value:"Linux",label:"Linux系统"},{value:"Windows",label:"Windows系统"},{value:"Other",label:"其他系统"}],device_types:[{key:"VM",value:"虚拟机"},{key:"key",value:"物理机"}],rules:{hostname:[{required:!0,message:"请输入主机地址",trigger:"blur"}]}}},created:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{checkPermission:s.a,init:function(){var e=this;Object(n.e)(this.$route.query.id).then(function(t){e.form_base=t,e.form_base.add_time=Object(u.b)(e.form_base.add_time),e.form_base.modify_time=Object(u.b)(e.form_base.modify_time),console.log(e)}),Object(l.e)("DEVICE_TYPE").then(function(t){e.device_types=t[0].DEVICE_TYPE}),this.getAllBusiness(),this.getAllGroup(),this.getAllLable()},closeTag:function(){this.$store.dispatch("delView",this.$store.state.tagsView.visitedViews.slice(-1)[0]),this.$router.go(-1)},cancel:function(){this.button="edit",this.is_Readonly=!0},edit:function(){this.button="save",this.is_Readonly=!1},doSubmit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.loading=!0,Object(n.b)(e.form_base.id,e.form_base).then(function(t){e.resetForm(),e.$message({showClose:!0,type:"success",message:"修改成功!",duration:2500}),e.loading=!1,e.is_Readonly=!0,e.button="edit",e.init()}).catch(function(t){e.loading=!1,console.log(t.response.data.detail)}))})},resetForm:function(){this.form_base={id:"",add_time:"",modify_time:"",hostname:"",port:"",username:"",password:"",key_filename:"",auth_type:"",status:"",sys_hostname:"",mac_address:"",sn_number:"",os_version:"",os_type:"",device_type:"",warranty_date:"",buy_date:"",businesses:[],groups:[],labels:[],error_message:""}},getAllGroup:function(){var e=this;Array.isArray(this.group_list)&&0===this.group_list.length&&Object(i.d)().then(function(t){var a=e;t.results.forEach(function(e,t){var s={value:e.id,label:e.name};a.group_list.push(s)})})},getAllLable:function(){var e=this;Array.isArray(this.label_list)&&0===this.label_list.length&&Object(o.d)().then(function(t){var a=e;t.forEach(function(e,t){var s={value:e.id,label:e.name};a.label_list.push(s)})})},getAllBusiness:function(){var e=this;Array.isArray(this.business_list)&&0===this.business_list.length&&Object(r.d)().then(function(t){var a=e;t.results.forEach(function(e,t){var s={value:e.id,label:e.name};a.business_list.push(s)})})}}},d=(a("yDuJ"),a("KHd+")),m=Object(d.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form_base,rules:e.rules,size:"small","label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"主机名"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.sys_hostname,callback:function(t){e.$set(e.form_base,"sys_hostname",t)},expression:"form_base.sys_hostname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"IP/域名",prop:"hostname"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.hostname,callback:function(t){e.$set(e.form_base,"hostname",t)},expression:"form_base.hostname"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"认证类型"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,placeholder:"请选择认证类型"},model:{value:e.form_base.auth_type,callback:function(t){e.$set(e.form_base,"auth_type",t)},expression:"form_base.auth_type"}},e._l(e.types,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"系统类型"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,placeholder:"请选择认证类型"},model:{value:e.form_base.os_type,callback:function(t){e.$set(e.form_base,"os_type",t)},expression:"form_base.os_type"}},e._l(e.os_types,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"SN编号"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.sn_number,callback:function(t){e.$set(e.form_base,"sn_number",t)},expression:"form_base.sn_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"系统版本"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.os_version,callback:function(t){e.$set(e.form_base,"os_version",t)},expression:"form_base.os_version"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,placeholder:"请选择设备类型"},model:{value:e.form_base.device_type,callback:function(t){e.$set(e.form_base,"device_type",t)},expression:"form_base.device_type"}},e._l(e.device_types,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,multiple:"",placeholder:"请选择"},model:{value:e.form_base.labels,callback:function(t){e.$set(e.form_base,"labels",t)},expression:"form_base.labels"}},e._l(e.label_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"关联业务"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,multiple:"",placeholder:"请选择"},model:{value:e.form_base.businesses,callback:function(t){e.$set(e.form_base,"businesses",t)},expression:"form_base.businesses"}},e._l(e.business_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"设备组"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,multiple:"",placeholder:"请选择"},model:{value:e.form_base.groups,callback:function(t){e.$set(e.form_base,"groups",t)},expression:"form_base.groups"}},e._l(e.group_list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form_base.buy_date,callback:function(t){e.$set(e.form_base,"buy_date",t)},expression:"form_base.buy_date"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"到保日期"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form_base.warranty_date,callback:function(t){e.$set(e.form_base,"warranty_date",t)},expression:"form_base.warranty_date"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("label",{staticClass:"el-form-item__label",staticStyle:{width:"90px"}},[e._v("入库时间")]),e._v(" "),a("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"90px"}},[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.form_base.add_time))])])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",{staticClass:"el-form-item__label",staticStyle:{width:"90px"}},[e._v("变更时间")]),e._v(" "),a("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"90px"}},[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.form_base.modify_time))])])])],1),e._v(" "),a("el-row",[e.form_base.error_message?a("el-form-item",{attrs:{label:"错误信息"}},[a("el-input",{staticStyle:{width:"720px"},attrs:{readonly:e.is_Readonly,type:"textarea"},model:{value:e.form_base.error_message,callback:function(t){e.$set(e.form_base,"error_message",t)},expression:"form_base.error_message"}})],1):e._e()],1),e._v(" "),a("el-form-item",[a("div",{staticStyle:{display:"inline-block",margin:"20px 0px",float:"left"}},[e.checkPermission(["admin","asset_all","asset_edit"])&&"edit"==e.button?a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("编辑")]):e._e(),e._v(" "),e.checkPermission(["admin","asset_all","asset_edit"])&&"save"==e.button?a("el-button",{attrs:{type:"success"},on:{click:e.doSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.checkPermission(["admin","asset_all","asset_edit"])&&"save"==e.button?a("el-button",{attrs:{type:"warning"},on:{click:e.cancel}},[e._v("取消")]):e._e(),e._v(" "),e.checkPermission(["admin","asset_all","asset_edit"])&&"edit"==e.button?a("el-button",{on:{click:e.closeTag}},[e._v("返回")]):e._e()],1)])],1)],1)},[],!1,null,null,null);t.default=m.exports},qpgI:function(e,t,a){"use strict";a.d(t,"c",function(){return l}),a.d(t,"e",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return o});var s=a("t3Un");function l(e){return e?Object(s.a)({url:"api/device/list/?os_type="+e,method:"get"}):Object(s.a)({url:"api/device/list/",method:"get"})}function n(e){return Object(s.a)({url:"api/devices/"+e+"/",method:"get"})}function r(e){return Object(s.a)({url:"api/devices/"+e+"/",method:"delete"})}function i(e,t){return Object(s.a)({url:"api/devices/"+e+"/",method:"put",data:t})}function o(e,t){return Object(s.a)({url:"api/devices/statistics/?type="+e,method:"post",data:t})}},yDuJ:function(e,t,a){"use strict";var s=a("/Hsh");a.n(s).a}}]);